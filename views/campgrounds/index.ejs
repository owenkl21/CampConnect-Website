<% layout('layouts/boilerplate')%>

<div class="row">
  <div class="col-md-6 ml-auto mr-auto" style="width:100%">
    <div class="card mt-1 mb-5 pt-2 text-center rounded" id="reviewsBox">
      <h1 class="text-center mt-1 mb-1" style="font-family: 'Comfortaa', cursive">
        Cluster Map
      </h1>
      <div id="map" style="width: 100%; height: 500px"></div>
    </div>
  </div>
</div>


<div class="card mb-3 py-3 px-3" id=" IndexCards">
  <div class="row">
    <div class="col-md-6 ml-auto mr-auto">
      <div class="card mt-1 mb-5 pt-2text-center" id="reviewsBox">
        <h1
          class="text-center mt-1 mb-1"
          style="font-family: 'Comfortaa', cursive"
        >
          All Campgrounds
        </h1>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="card-group">
      <% for (let campground of campgrounds){%>
      <div class="row col-md-4 mr-2">
        <div class="col">
          <div class="card mb-3 mx-auto" id="IndexCard" style="height: 640px">
            <% campground.images.forEach((img, i)=> { %> <% if(i===0){%>
            <img
              class="card-img-top"
              style="height: 15rem; object-fit: cover"
              alt=""
              src="<%=img.url%>"
            />
            <% } %> <% }) %>
            <div
              class="card-body"
              style="display: flex; flex-direction: column"
            >
              <h5 class="card-title"><%= campground.title %></h5>
              <p class="card-text"><%= campground.description %></p>
              <p class="card-text">
                <small class="text-muted"> <%= campground.location%> </small>
              </p>
              <a
                class="btn"
                id="button50"
                style="margin-top: auto"
                href="/campgrounds/<%=campground._id%>"
                >View <%=campground.title%></a
              >
            </div>
          </div>
        </div>
      </div>
      <% }%>
    </div>
  </div>
</div>

<div class="text-center">
  <a class="btn btn-secondary mt-3 mb-5" id="button50" href="/campgrounds/new"
    >Add Campground</a
  >
</div>

<script>
  const mapToken = "<%-process.env.MAPBOX_TOKEN%>";
  const campgrounds = {
    features: <%-JSON.stringify(campgrounds) %> ,
  };
</script>

<script src="/javascripts/clusterMap.js"></script>
